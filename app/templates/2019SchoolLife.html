<head>
    <meta name="viewport" content="user-scalable=no">
    <link rel="stylesheet" href="static/2019SchoolLife/css/swiper.min.css">
    <link rel="stylesheet" href="static/2019SchoolLife/css/style.css">
    <link rel="stylesheet" href="static/2019SchoolLife/css/animate.css">
    <link rel="stylesheet" href="static/2019SchoolLife/css/chart.css">
    <link rel="stylesheet" href="static/2019SchoolLife/css/comment.css">
    <link rel="stylesheet" href="static/2019SchoolLife/css/normalize.min.css">
    <link rel='stylesheet prefetch' href='static/2019SchoolLife/css/animate.min.css'>
    <link rel="stylesheet" href="static/2019SchoolLife/css/style11.css">
</head>


<body>
<img id="audio_btn" class="rotate" src="static/2019SchoolLife/img/play.png">

<audio loop src="static/2019SchoolLife/mp3/mp3.mp3" id="media" autoplay=""></audio>
{% if data.userid[:2]=="15" and data.sex==2 %}
<img id="person" class="person" src="static/2019SchoolLife/img/girl_b_w.png">
<img hidden="true" id="person-jump" class="person" src="static/2019SchoolLife/img/girljump_b_w.gif">
{% elif data.userid[:2]=="15" and data.sex==1 %}
<img id="person" class="person" src="static/2019SchoolLife/img/boy_b_g.png">
<img hidden="true" id="person-jump" class="person" src="static/2019SchoolLife/img/boyjump_b_l.gif">
{% elif data.sex==2 %}
<img id="person" class="person" src="static/2019SchoolLife/img/girl.png">
<img hidden="true" id="person-jump" class="person" src="static/2019SchoolLife/img/girljumpbig.gif">
{% else %}
<img id="person" class="person" src="static/2019SchoolLife/img/boy.png">
<img hidden="true" id="person-jump" class="person" src="static/2019SchoolLife/img/boyjumpbig.gif">
{% endif %}

<div class="swiper-container">
    <div class="swiper-wrapper">
        <!--        第一页-->
        <div class="swiper-slide page0">
            <img class="stone" src="static/2019SchoolLife/img/1-stone.png">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <div class="page0-count-div">
                你是第<em>{{data.count}}</em>个打开这份记录的人
            </div>
            <div class="page0-text-div">
                工大不大 , 四年却很长<br>
                <p>足够你用脚印丈量每一段距离;</p>
                工大很大 , 但四年不长<br>
                <p>等待你将生活在这里的每一刻细细品尝</p>
                时光肆意流 , 工大点滴留<br>
                你和工大的故事还在记录着<br>
                <p>...</p>
                点滴校园 , 时间看得见
            </div>
        </div>
        <!--第二页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="trip" src="static/2019SchoolLife/img/trip.png">
            <div class="page1-text-div">
                <em>20{{data.userid[:2]}}年7月</em>,</br>
                一纸录取通知书从北方工业大学</br>
                来到你的身边</br>
                <p>你来自<em>{{data.city}}</em>,</p>
                <p>学校有一共<em>{{data.same_name_school}}</em>人和你来自于同一个地方</br></p>
                其中和你一个学院的有<em>{{data.same_name_college}}</em>人
            </div>
        </div>
        <!--第三页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="dunpin" src="static/2019SchoolLife/img/dunpin.png">
            <div class="page2-text-div">
                记得刚刚踏进校门的那个夏天，<br/>
                <p>阳光正好。<br/></p>
                你上的第一门课程是在<em>{{data.first_class_room}}</em>的<em>{{data.first_class}}</em><br/>
                <p>那天的你青涩却笃定，向往着不远的未来。</p>
            </div>
        </div>
        <!--第四页-->
        <div class="swiper-slide">
            <div class="page3-text-div">
                 一定是特别的缘分，<br>
                {%if data.same_name!=0%}
                学校一共有<em>{{data.same_name}}</em>人与你同名同姓。<br>
                {%else%}
                你是全校唯一一个叫做<em>{{data.name}}</em>的人。<br>
                {%endif%}
                <br>学校一共有<em>{{data.same_day_school}}</em>人与你同一天出生。<br>
                {%if data.same_day_and_year!=0%}
                <br>其中有<em>{{data.same_day_and_year}}</em>人与你同年同月同日。<br>
                {%endif%}
                <br>期待在一个玉兰花开的日子里，与 ta 相识。
            </div>
            <img class="garden" src="static/2019SchoolLife/img/garden.png">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
        </div>
        <!--        第五页-->
        <div class="swiper-slide">
            <div class="page4-text-div">
                你为一次考试翻遍图书馆，<br>
                为一篇论文与群书鏖战。<br>
                {%if data.book!='0'%}
                <br>你在图书馆里借过<em>{{data.book}}</em>次书，<br>
                <p>与书为友，以书为伴，你丝毫不觉得孤单。</p>
                {%else%}
                但你未曾在图书馆借阅过。<br>
                为何不找一个宁静的午后走进图书馆<br>
                借一本心仪的书感受指尖在纸上拂过的愉悦。<br><br>
                {%endif%}
                你一共登陆了<em>{{data.iclass_sum}}次</em>多模式教学网<br>
                全校排名<em>{{data.iclass_school_rank}}</em>
            </div>
            <img class="garden" src="static/2019SchoolLife/img/5-library.png">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
        </div>
        <!--        第六页-->
        <div class="swiper-slide">
            <div class="page5-text-div">
                <p>无数次连接 NCUT-AUTO，
                <P>无数次与校园网作斗争。</p>
                <p>估计连你自己都惊讶，</p>
                你一共使用了<em>{{data.school_net_sum}}G</em>的校园流量。
            </div>
            <img class="computer" src="static/2019SchoolLife/img/computer.png">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
        </div>
        <!--        第七页-->
        <div class="swiper-slide">
            <div class="page6-text-div">
                每天的各个时段，<br> 你的校园网用量都不太相同，<br> 那天晚上，<br> 你好像睡得格外的晚 ...
            </div>
<!--            校园网分时段用量图表-->
            <canvas id="net-map"></canvas>
            <img class="computer" src="static/2019SchoolLife/img/computer.png">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
        </div>
        <!--        第八页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="dunpin" src="static/2019SchoolLife/img/hanxue.png">
            <div class="page7-text-div">
                你在五教台阶低头驻足，在博远桥上仰望星空。<br/>
                <br>一花一木，一草一树，<br/>
                你在熟悉的校园里生活学习。<br/>
                <br>你一共完成了<em>{{data.grades[1]}}门</em>课程，<br/>
                共计<em>{{data.grades[2]}}学分</em><br/>
                <br>你成绩最好的一门课程是<em>{{data.grades[3]}}</em>，总评<em>{{data.grades[4]}}分</em><br/>
                <br/>现在的努力和奋斗，未来的故事和期许，同工大的记忆一起，藏进校园点滴。
            </div>
        </div>
        <!--        第九页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="money" src="static/2019SchoolLife/img/money.png">
            <div class="page8-text-div">
                时光温酒，岁月磨镜，<br/>
                一张校园卡是工大点滴的通行证。<br/>
                <p>不知道你是否关注过，<br/></p>
                你一共刷卡消费了<em>{{data.sum_consum_times}}次</em>，<br/>
                总计<em>{{data.sum_consum_money}}元</em>。<br/>
            </div>
        </div>
        <!--        第十页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="dining" src="static/2019SchoolLife/img/dining.png">
            <div class="page9-text-div">
                不可辜负的，是工大的美食。<br>
                <br>你在(食堂)消费<em>{{data.consum_dining_hall_sum}}元</em>，你最爱的食堂是<em>{{data.consum_dining_hall[0][0]}}</em>。<br>
                相信来日阔别工大，<br>
                怀念更多的是舌尖上的那抹味道。
            </div>
            <section class="data" style="margin-top: 100px;width: 800px">
                <div class="bar-wrap">
                    <label>{{data.consum_dining_hall[0][0]}}</label>
                    <div class="bar blue" data-percentage="{{data.consum_dining_hall[0][3]}}"
                         data-money="{{data.consum_dining_hall[0][2]}}"></div>
                </div>
                <div class="bar-wrap">
                    <label>{{data.consum_dining_hall[1][0]}}</label>
                    <div class="bar green" data-percentage="{{data.consum_dining_hall[1][3]}}"
                         data-money="{{data.consum_dining_hall[1][2]}}"></div>
                </div>
                <div class="bar-wrap">
                    <label>{{data.consum_dining_hall[2][0]}}</label>
                    <div class="bar red" data-percentage="{{data.consum_dining_hall[2][3]}}"
                         data-money="{{data.consum_dining_hall[2][2]}}"></div>
                </div>
                <div class="bar-wrap">
                    <label>{{data.consum_dining_hall[3][0]}}</label>
                    <div class="bar purple" data-percentage="{{data.consum_dining_hall[3][3]}}"
                         data-money="{{data.consum_dining_hall[3][2]}}"></div>
                </div>
            </section>

        </div>
<!--        十一页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <img class="water" src="static/2019SchoolLife/img/water.png">
            <img class="book" src="static/2019SchoolLife/img/book.png">
            <div class="page10-text-div">
                和朋友们嘻嘻哈哈结伴洗澡的样子依然定格，<br/>
                {%if data.consum_bath[2]!=0%}
                <br>你一共花费<em>{{data.consum_bath[2]}}¥</em>洗澡，<br/>
                {%else%}
                <br>但是你没有在学校洗过澡。
                {%endif%}
                泡沫吹出的光影中，有你我共同的回忆。<br/>
                <br>你为大创小创绞尽脑汁，<br/>
                你为期末考试熬秃头发，<br/>
                前路在望，你仍在努力。
            </div>
        </div>
        <!--        第十二页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/background.png">
            <div id="tagbox">
                {% for i in data.msgs %}
                <a class="group">
                    <img src="{{i.img}}" class="img"></img>
                    {{i.msg}}
                </a>
                {% endfor %}
            </div>
            <div class="container" style="margin-top: 250px;">
                <div id="root"></div>
                <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>
            </div>
            <img id="btn_submit" src="static/2019SchoolLife/img/send.png"/>
            <div class="xiaoyouhui">
                <img style="width: 150px;bottom: 150px;" src="static/2019SchoolLife/img/xiaoyouhui.png">
                <text style="margin-top: 15px">北方工业大学校友会</text>
            </div>
        </div>
        <!--        第十三页-->
        <div class="swiper-slide">
            <img class="bgimg" src="static/2019SchoolLife/img/bgShare.png">
            <img id="share-img">
            <div class="page13-div">
                <img id="btn_change" class="change" src="static/2019SchoolLife/img/change.png">
                <text style="font-size: 25px">#长按保存图片分享#</text>
            </div>
            <img class="cat" src="static/2019SchoolLife/img/cat.png">
        </div>
        <!--        第十四页-->
        <div class="swiper-slide">
            <img class="biwan" src="static/2019SchoolLife/img/biwan.jpeg">
            <div class="btn-biwan-div">
                <img class="finger" src="static/2019SchoolLife/img/finger.gif">
                <div class="btn-biwan-div-in">
                    <div id="btn-biwan" class="btn-biwan"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="static/2019SchoolLife/js/script.js"></script>
<script src="https://unpkg.com/flyio/dist/fly.min.js"></script>
<script src="static/2019SchoolLife/js/swiper.min.js"></script>
<script src="static/2019SchoolLife/js/move.min.js"></script>
<script src="static/2019SchoolLife/js/jQuery.js"></script>
<script src="static/2019SchoolLife/js/jquery.fittext.js"></script>
<script src="static/2019SchoolLife/js/jquery.lettering.js"></script>
<script src="static/2019SchoolLife/js/jquery.textillate.js"></script>
<script src="static/2019SchoolLife/js/jweixin-1.2.0.js"></script>
<script src="static/2019SchoolLife/js/index.js"></script>
<script src="static/2019SchoolLife/js/react.min.js"></script>
<script src="static/2019SchoolLife/js/react-dom.min.js"></script>
<script src="static/2019SchoolLife/js/prop-types.js"></script>
<script src="static/2019SchoolLife/js/index11.js"></script>

<script>
    var LineChart = function (options) {

        var data = options.data;
        var canvas = document.getElementById("net-map")
        var context = canvas.getContext('2d');

        var rendering = false,
            paddingX = 40,
            paddingY = 40,
            width =800,
            height = 400,
            progress = 0;

        canvas.width = width;
        canvas.height = height;

        var maxValue,
            minValue;

        var y1 = paddingY + (0.05 * (height - (paddingY * 2))),
            y2 = paddingY + (0.50 * (height - (paddingY * 2))),
            y3 = paddingY + (0.95 * (height - (paddingY * 2)));

        format();
        render();

        function format(force) {

            maxValue = 0;
            minValue = Number.MAX_VALUE;

            data.forEach(function (point, i) {
                maxValue = Math.max(maxValue, point.value);
                minValue = Math.min(minValue, point.value);
            });

            data.forEach(function (point, i) {
                point.targetX = paddingX + (i / (data.length - 1)) * (width - (paddingX * 2));
                point.targetY = paddingY + ((point.value - minValue) / (maxValue - minValue) * (height - (paddingY * 2)));
                point.targetY = height - point.targetY;

                if (force || (!point.x && !point.y)) {
                    point.x = point.targetX + 30;
                    point.y = point.targetY;
                    point.speed = 0.04 + (1 - (i / data.length)) * 0.05;
                }
            });

        }

        function render() {

            if (!rendering) {
                requestAnimationFrame(render);
                return;
            }

            context.font = '10px sans-serif';
            context.clearRect(0, 0, width, height);


            if (options.yAxisLabel) {
                context.save();
                context.globalAlpha = progress;
                context.translate(paddingX - 15, height - paddingY - 10);
                context.rotate(-Math.PI / 2);
                context.fillStyle = '#fff';
                context.fillText(options.yAxisLabel, 0, 0);
                context.restore();
            }

            var progressDots = Math.floor(progress * data.length);
            var progressFragment = (progress * data.length) - Math.floor(progress * data.length);

            data.forEach(function (point, i) {
                if (i <= progressDots) {
                    point.x += (point.targetX - point.x) * point.speed;
                    point.y += (point.targetY - point.y) * point.speed;

                    context.save();

                    var wordWidth = context.measureText(point.label).width;
                    context.globalAlpha = i === progressDots ? progressFragment : 1;
                    context.fillStyle = point.future ? '#aaa' : '#000';
                    context.fillText(point.label, point.x - (wordWidth / 2), height - 18);

                    if (i < progressDots && !point.future) {
                        context.beginPath();
                        context.arc(point.x, point.y, 4, 0, Math.PI * 2);
                        context.fillStyle = '#1baee1';
                        context.fill();
                    }//顶点颜色

                    context.restore();
                }

            });

            context.save();
            context.beginPath();
            context.strokeStyle = '#1baee1';//线条的颜色
            context.lineWidth = 2;

            var futureStarted = false;

            data.forEach(function (point, i) {

                if (i <= progressDots) {

                    var px = i === 0 ? data[0].x : data[i - 1].x,
                        py = i === 0 ? data[0].y : data[i - 1].y;

                    var x = point.x,
                        y = point.y;

                    if (i === progressDots) {
                        x = px + ((x - px) * progressFragment);
                        y = py + ((y - py) * progressFragment);
                    }

                    if (point.future && !futureStarted) {
                        futureStarted = true;

                        context.stroke();
                        context.beginPath();
                        context.moveTo(px, py);
                        context.strokeStyle = '#aaa';

                        if (typeof context.setLineDash === 'function') {
                            context.setLineDash([2, 3]);
                        }
                    }

                    if (i === 0) {
                        context.moveTo(x, y);
                    } else {
                        context.lineTo(x, y);
                    }

                }

            });

            context.stroke();
            context.restore();

            progress += (1 - progress) * 0.02;

            requestAnimationFrame(render);

        }

        this.start = function () {
            rendering = true;
        }

        this.stop = function () {
            rendering = false;
            progress = 0;
            format(true);
        }

        this.restart = function () {
            this.stop();
            this.start();
        }

        this.append = function (points) {
            progress -= points.length / data.length;
            data = data.concat(points);

            format();
        }

        this.populate = function (points) {
            progress = 0;
            data = points;

            format();
        }

    };

    var chart = new LineChart({data: []});

    reset();

    // chart.start();

    function append() {
        chart.append([
            {label: 'Rnd', value: 1300 + (Math.random() * 1500), future: true}
        ]);
    }

    function restart() {
        chart.restart();
    }
    function reset() {
  chart.populate([
    { label: '00:00', value: {{data.school_net_day[0]}} },
    { label: '02:00', value: {{data.school_net_day[1]}} },
    { label: '04:00', value: {{data.school_net_day[2]}} },
    { label: '06:00', value: {{data.school_net_day[3]}} },
    { label: '08:00', value: {{data.school_net_day[4]}} },
    { label: '10:00', value: {{data.school_net_day[5]}} },
    { label: '12:00', value: {{data.school_net_day[6]}} },
    { label: '14:00', value: {{data.school_net_day[7]}} },
    { label: '16:00', value: {{data.school_net_day[8]}} },
    { label: '18:00', value: {{data.school_net_day[9]}} },
    { label: '20:00', value: {{data.school_net_day[10]}} },
    { label: '22:00', value: {{data.school_net_day[11]}} },
  ]);
}
</script>
<script>
    var shareList=[
        {
            img:"static/2019SchoolLife/img/share1.png",
            text: [
                "我来自{{data.city}}，",
                "全校一共有{{data.same_name_school}}和我来自同一个地方，",
               "相处这么久，",
                "我才知道还有{{data.same_day_and_year}}人和我同年同月同日生，",
                {%if data.same_name!=0%}
                "也才知道，尽然有{{data.same_name}}人和我同名同姓，",
                    {%if data.userid[:2]=="15"%}
                    "如果还有时间，我真想和他们认识。",
                    {%endif%}
                {%else%}
                "但我的名字在校园中却是独一无二的。",
                {%endif%}
            ]
        },
        {
            img: "static/2019SchoolLife/img/share2.png",
            text: [
                 "从{{data.userid[:2]}}年9月，我第一次使用校园卡，",
                "我一共使用了{{data.sum_consum_times}}次，",
                "共计消费了{{data.sum_consum_money}}元",
                {%if data.consum_bath[2]!=0%}
                "光洗澡我就花了{{data.consum_bath[2]}}元",
                "我果然是一个精致的{%if data.sex==1%}男{%else%}女{%endif%}生",
                {%else%}
                "我没有在学校洗过澡",
                {%endif%}
            ]
        },
        {
            img: "static/2019SchoolLife/img/share3.png",
            text: [
                "最难割舍的还是工大的美食。",
                "我在食堂消费了{{data.consum_dining_hall_sum}}元，",
                "我最喜爱的是{{data.consum_dining_hall[0][0]}}",
                "每天中午走在小广场上，",
                "都在思考今天该临幸哪个。"
            ]
        },
        {
            img: "static/2019SchoolLife/img/share4.png",
            text: [
                "每到月底总会发现我的校网不够用，",
                "至今为止，我总共用了{{data.school_net_sum}}G流量。",
                "考试前我一次又一次地登陆多模式查阅课件，",
                "我一共登陆了{{data.iclass_sum}}次",
                "全校排名{{data.iclass_school_rank}}。",
            ]
        },
    ]
    var index=0
    var userid={{data.userid}}
    var count={{data.count}}
    var wenyi_url="{{data.wenyi}}"
</script>
<script src="static/2019SchoolLife/js/main.js"></script>
</body>